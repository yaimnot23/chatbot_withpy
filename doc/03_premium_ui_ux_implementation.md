# 03. 프리미엄 UI/UX 및 데이터 가공 가이드

이 문서는 AI 챗봇의 답변을 어떻게 정제하고, Spring Boot에서 어떻게 시각적으로 고급스럽게 구현했는지에 대한 기술적 상세 내용을 담고 있습니다.

---

## 1. 데이터 가공 흐름 (Data Pipeline)

챗봇의 답변은 다음의 2단계를 거쳐 사용자에게 전달됩니다.

### 단계 1: 파이썬 서버의 데이터 정제 (Python Data Cleansing)

AI가 원본 데이터(엑셀 등)를 읽을 때 발생하는 지저분한 수치들을 **생성 단계부터** 깔끔하게 만듭니다.

- **구현 방법**: `server.py`의 `system_prompt`에 명시적인 규칙 추가.
- **적용 규칙**:
  - 점수(적정/예상): 소수점 첫째 자리까지만 반올림 (`697.37...` -> `697.4`)
  - 인원수(정원): 소수점을 버리고 정수로 변환 (`15.0` -> `15`)
- **효과**: AI가 답변을 작성할 때부터 사람이 읽기 편한 "깨끗한 데이터"로 전송합니다.

### 단계 2: Spring Boot의 시각적 가공 (Spring Boot Presentation)

파이썬이 보내준 마크다운 형식의 텍스트를 웹 브라우저가 이해하는 **고급 카드 UI**로 변환합니다.

- **구현 방법**: `chatbot.html`에서 `marked.js` 라이브러리와 전용 CSS 사용.
- **적용 기술**:
  - **Marked.js**: `|---|` 와 같은 마크다운 표 문법을 실제 `<table>` 태그로 변환.
  - **Premium CSS**: 표의 가로 깨짐(세로로 글자 나옴)을 방지하기 위해 `white-space: nowrap`과 가로 스크롤(`overflow-x: auto`) 적용.

---

## 2. 핵심 구현 코드 (Core Code Snippets)

### [BE] 파이썬 데이터 정제 프롬프트

```python
# server.py 내 규칙 추가
"6. 데이터 정제: 모든 수치는 가독성 좋게 정리하세요."
"   - 점수는 소수점 첫째 자리까지 반올림 (예: 697.4)"
"   - 정원은 정수로 표기 (예: 15)"
```

### [FE] Spring Boot 마크다운 렌더링 (JS)

```javascript
// chatbot.html 내 메시지 출력 로직
if (!isUser) {
  // marked 라이브러리를 통해 AI의 답변(마크다운)을 HTML로 변환하여 삽입
  messageDiv.innerHTML = marked.parse(text);
}
```

### [FE] 반응형 카드 UI 스타일 (CSS)

```css
/* 표가 깨지지 않게 가로 스크롤 및 카드 스타일 적용 */
.message.bot table {
  display: block;
  width: 100%;
  overflow-x: auto;
  white-space: nowrap; /* 글자 세로 깨짐 방지 핵심 */
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
}
```

---

## 3. 요약: 왜 이렇게 했나요?

1.  **가독성**: 긴 소수점은 입시 정보의 신뢰도를 떨어뜨리고 보기에 불편합니다.
2.  **모바일 대응**: 일반적인 표는 채팅창에서 글자가 세로로 서버리지만, 가로 스크롤 방식을 채택하여 모바일에서도 완벽하게 읽을 수 있게 했습니다.
3.  **전문성**: 단순한 텍스트 답변보다 "정리된 리포트 카드" 형태가 사용자에게 더 높은 만족감을 줍니다.
